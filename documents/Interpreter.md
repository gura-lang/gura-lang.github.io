---
layout: page
lang: en
title: Interpreter
chapter: 6
---

# {{ page.chapter }}. {{ page.title }}

## {{ page.chapter }}.1. How Interpreter Works

The Interpreter looks up and modifies content of Environment
in accordance with Expressions that has been generated by parsing source codes.

The execution of the Interpreter consists of two stages **evaluation** and **assignment**.
In an evaluation stage, it looks up variables in Environment and do evaluation
depending on the current expression.
In an assingment stage, the Interpreter will add new variables
or modify existing variables in Environment.

In the Interpreter, Evaluation stage always occurs on each Expression
while Assignment stage only does when `Assign` expression is executed.

          +---------------+
          |  Expressions  |
          +---------------+
                  | supply
                  V
    +----------------------------+     look-up     +---------------+
    |              evaluation <--|-----------------|               |
    |  Interpreter      |        |   assignment    |  Environment  |
    |                   `--------|---------------->|               |
    +----------------------------+                 +---------------+


## {{ page.chapter }}.2. Evaluation Stage

* Evaluation result of a `Value` expression will be the value it owns in itself.

* An `Identifier` expression will look up an Environment and return the result value.

* A `Suffixed` expression will look up an entry in Suffix Manager
 that matches its suffix symbol and execute the entry with its body string.

* A `UnaryOp` expression

* A `Quote` expression

* A `BinaryOp` expression

* Execution of an `Assign` expression triggers Assignment Stage. See the next section.

* A `Member` expression

* A `Lister` expression

* An `Iterer` expression

* A `Block` expression

* A `Root` expression

* An `Indexer` expression

* A `Caller` expression


## {{ page.chapter }}.3. Assignment Stage

Operation `x = y` assigns the value of `y` to `x`.

The expression of `x` may be one of `Identifer`, `Lister`, `Member`, `Indexer` and `Caller`.

* An `Identifier` expression

* A `Lister` expression

* A `Member` expression

* An `Indexer` expression

* A `Caller` expression




### {{ page.chapter }}.3.6. Operator before Assignment

An Assignment operator can be combined with one of several other operators.

<table>
<tr><th>Assignment Form</th><th>Equivalent Code</th></tr>
<tr><td><code>x += y</code></td><td><code>x = x + y</code></td></tr>
<tr><td><code>x -= y</code></td><td><code>x = x - y</code></td></tr>
<tr><td><code>x *= y</code></td><td><code>x = x * y</code></td></tr>
<tr><td><code>x /= y</code></td><td><code>x = x / y</code></td></tr>
<tr><td><code>x %= y</code></td><td><code>x = x % y</code></td></tr>
<tr><td><code>x **= y</code></td><td><code>x = x ** y</code></td></tr>
<tr><td><code>x &= y</code></td><td><code>x = x & y</code></td></tr>
<tr><td><code>x |= y</code></td><td><code>x = x | y</code></td></tr>
<tr><td><code>x ^= y</code></td><td><code>x = x ^ y</code></td></tr>
<tr><td><code>x <<= y</code></td><td><code>x = x << y</code></td></tr>
<tr><td><code>x >>= y</code></td><td><code>x = x >> y</code></td></tr>
</table>
